# Node.js with Angular
# Build a Node.js project that uses Angular.
# Add steps that analyze code, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
  branches:
    include:
      - main
  paths:
    include:
      - files/*
      - azure-pipelines-resources.yml

pool:
  vmImage: ubuntu-latest

steps:
  - task: ArchiveFiles@2
    inputs:
      rootFolderOrFile: "files"
      includeRootFolder: false
      archiveType: "zip"
      archiveFile: "publish/resources/$(Build.BuildId)-Resources.zip"
      replaceExistingArchive: true
    displayName: "Zip"

  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: "publish/resources/"
      ArtifactName: "drop"
      publishLocation: "Container"
    displayName: "Publish"
