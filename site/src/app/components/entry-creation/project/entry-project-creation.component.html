<kendo-dialog
  width="80%"
  height="80%"
  maxWidth="1000px"
  [title]="'LibraryCreate.TitleProject' | translate"
  (close)="dialog.close()"
>
  <div class="d-flex flex-column h-100">
    <kendo-stepper
      [steps]="steps"
      stepType="full"
      [currentStep]="view()"
      [linear]="true"
    >
      <ng-template kendoStepperIndicatorTemplate let-step>
        <div (click)="stop($event)">
          @if (step.icon) { <fa-icon [icon]="step.icon" /> }
        </div>
      </ng-template>
      <ng-template kendoStepperLabelTemplate let-step>
        <div (click)="stop($event)">
          {{ step.label | translate }}
          @if (step.isOptional) { <span class="mg-l-5">*</span> }
        </div>
      </ng-template>
    </kendo-stepper>
    <div [appScrollToTop]="view()" class="tx-center flex-fill pd-t-20 pd-x-10">
      @if (view() === 0) {
      <div class="d-inline-block w-100 mx-wd-800 tx-left">
        <div class="pd-x-12 mb-3">
          <label for="templateTitle" class="form-label tx-18">
            {{ "LibraryCreate.TemplateTitle" | translate }}
          </label>
          <input
            kendoTextBox
            name="templateTitle"
            id="templateTitle"
            [(ngModel)]="templateTitle"
          />
          <label class="d-inline-block tx-12 tx-italic mg-t-5">
            {{ "LibraryCreate.TemplateTitleDescriptionPhase" | translate }}
          </label>
        </div>
        <div class="pd-x-12 mb-3">
          <label class="form-label tx-18">
            {{ "General.Visibility" | translate }}
          </label>
          <wbs-visibility-selection [(visibility)]="visibility" />
        </div>
        <div class="pd-x-12">
          <label class="form-label tx-18">
            {{ "LibraryCreate.ProjectCategory" | translate }}
          </label>
          <wbs-project-category-dropdown [(category)]="category" />
        </div>
      </div>
      } @else if (view() === 1) {
      <div class="d-inline-block w-100">
        <div class="pd-y-15 pd-x-30 tx-14">
          {{ "LibraryCreate.DisciplinesHeader" | translate }}
        </div>
        <div class="text-start">
          <wbs-phase-editor [(categories)]="phases" />
        </div>
      </div>
      } @else if (view() === 2) {

      <div class="d-inline-block w-100 mx-wd-800 text-center">
        <div class="pd-y-15 pd-x-30 tx-14">
          {{ "LibraryCreate.DisciplinesHeader" | translate }}
        </div>
        <div class="d-inline-block w-100" style="max-width: 500px">
          <wbs-discipline-editor
            [showAdd]="true"
            [(categories)]="disciplines"
          />
        </div>
      </div>
      } @else if (view() === 3) {

      <div class="d-inline-block w-100 mx-wd-800">
        <wbs-versioning [(alias)]="alias" />
      </div>
      } @else if (view() === 4) {

      <div class="d-inline-block w-100 mx-wd-800">
        @let saveState = service.saveState.state(); @if (saveState !== "saving")
        {
        <wbs-save-section
          [phases]="phases()"
          [versionAlias]="alias()"
          [category]="(categories | findById : category()!)!"
          [disciplines]="disciplines()"
          [templateTitle]="templateTitle()"
          [visibility]="visibility()"
        />
        }
        <wbs-saving-entry [saveState]="saveState" />
      </div>
      }
    </div>
  </div>

  <kendo-dialog-actions>
    <div class="flex-grow-1 text-start">
      @if (view() > 0) {
      <button kendoButton themeColor="warning" (click)="back()">
        {{ "General.Back" | translate }}
      </button>
      }
    </div>
    <div class="flex-grow-1 tx-10 text-center pd-t-10 tx-italic">
      * {{ "General.Optional" | translate }}
    </div>

    <div class="flex-grow-1 text-end">
      <button
        kendoButton
        themeColor="primary"
        [disabled]="!canContinue()"
        (click)="next()"
      >
        {{ nextButtonLabel() | translate }}
      </button>
    </div>
  </kendo-dialog-actions>
</kendo-dialog>
