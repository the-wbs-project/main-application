<div *ngIf="categories" class="display-flex flex-flow-col flex-align-stretch">
  <div *ngIf="showButtons" class="pd-b-10 text-center">
    <button
      class="btn btn-outline-primary mg-x-10"
      (click)="hideUnselected$.next(!hideUnselected$.getValue())"
    >
      <fa-icon [icon]="hideUnselected$.getValue() ? faEye : faEyeSlash" />
      {{ (hideUnselected$.getValue() ? "Projects.ShowUnselected" : "Projects.HideUnselected") | translate }}
    </button>

    <button class="btn btn-outline-primary mg-x-10" (click)="showCreate()">
      <fa-icon [icon]="faPlus" />
      {{ "General.Add" | translate }}
    </button>

    <button *ngIf="showSave" class="btn btn-outline-primary mg-x-10" (click)="saveClicked.emit()">
      <fa-icon [icon]="faFloppyDisk" />
      {{ "General.Save" | translate }}
    </button>
  </div>
  <div class="scroll mg-b-10" style="flex: 1 1 auto">
    <kendo-sortable
      [kendoSortableBinding]="categories"
      [ngClass]="'list-group display-ib text-start w-100'"
      [itemStyle]="{ cursor: 'move' }"
      [itemClass]="'opacity-1'"
      emptyItemClass="h-30 bd-2 bd-dashed border-dark"
      [activeItemStyle]="{ border: '2px dashed black', opacity: '0.7' }"
      zone="innerZone"
      (dataMove)="changed()"
      (dragEnd)="changed()"
    >
      <ng-template let-cat="item">
        <div
          *ngIf="!(hideUnselected$ | async) || cat.selected"
          class="list-group-item display-flex flex-row"
        >
          <div class="pd-t-12 wd-50 mn-wd-50 ht-40">
            <fa-layers [fixedWidth]="true">
              <fa-icon size="3x" [icon]="faCircle" />
              <fa-layers-text
                *ngIf="cat.selected"
                [content]="cat.number!.toString()"
                transform="right-14"
              />
            </fa-layers>
          </div>
          <div class="flex-grow-1">
            <div class="tx-16">
              {{ cat.label }}
            </div>
            <div class="tx-12 font-italic">
              {{ cat.description }}
            </div>
          </div>
          <div class="pd-t-5">
            <wbs-switch [(value)]="cat.selected" (valueChange)="changed()" />
          </div>
        </div>
      </ng-template>
    </kendo-sortable>
  </div>
</div>
