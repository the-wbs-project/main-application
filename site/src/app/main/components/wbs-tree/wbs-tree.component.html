<div appFillElement [paddingBottom]="30">
  <div class="flex-fill">
    <kendo-treelist
      #treelist
      class="h-100"
      kendoTreeListExpandable
      kendoTreeListSelectable
      [kendoTreeListFlatBinding]="nodes ?? []"
      parentIdField="treeParentId"
      idField="treeId"
      [initiallyExpanded]="false"
      [(expandedKeys)]="expandedKeys2"
      [selectable]="settings"
      (selectionChange)="rowSelected($event)"
      (dblclick)="showDetails.emit(clickedId)"
      (cellClick)="clickedId = $event.dataItem.id"
    >
      <kendo-treelist-column
        field="levelText"
        [title]="'Wbs.Level' | translate"
        [width]="100"
        class="level-column tx-11"
        headerClass="level-header-column tx-14"
      />
      @if (view === 'discipline') {
      <kendo-treelist-column
        field="sameAsLevelText"
        title="Same As"
        [width]="100"
        class="level-column same-level tx-11"
        headerClass="level-header-column tx-14"
      />
      }
      <kendo-treelist-column
        [expandable]="true"
        field="title"
        class="tx-11"
        headerClass="tx-14"
        [title]="'Wbs.Task' | translate"
      />
      @if (view === 'phase' && (width ?? 0) > 800) {
      <kendo-treelist-column
        field="disciplines"
        [width]="150"
        class="discipline-column"
        headerClass="discipline-column tx-14"
      >
        <ng-template kendoTreeListHeaderTemplate>
          <wbs-tree-discipline-legend
            [idsOrCats]="project?.disciplines ?? []"
          />
        </ng-template>
        <ng-template kendoTreeListCellTemplate let-dataItem>
          <wbs-discipline-icon-list [disciplines]="dataItem.disciplines" />
        </ng-template>
      </kendo-treelist-column>
      }
    </kendo-treelist>
  </div>
</div>
